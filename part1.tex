\part[Ablauf, Organisation und Umfeld]{Ablauf, Organisation und Umfeld
    }

\tableofcontents

\chapter{Aufgabenstellung}

\section{Titel der Arbeit}
Hitobito: Neue Generation von Personen-Filtern

\section{Thematik}
Eines der Kernfunktionalitäten von Hitobito ist das Filtern via vom Benutzer definierten Kriterien von Personen auf Personenlisten und Abos. Diese Funktionalität ist in den über 10 Jahren seit es Hitobito gibt oft erweitert worden. Durch die vielen neuen Filtermöglichkeiten wurde speziell das UI immer komplexer und unübersichtlicher. Die Personen-Filteroptionen für Personenlisten und die der Abos sehen ähnlich aus, weisen aber diverse nicht offensichtliche Unterschiede auf. Mit dieser Probe-IPA soll für den Backendteil der Abos (MailingLists) eine neue Generation von Personen-Filtern für Hitobito entwickelt werden.

\section{Ausgangslage}
Hitobito ist eine Open Source Webapplikation zum Verwalten von Mitgliedern, Events und vielem mehr. Die Ruby on Rails Applikation wurde 2012 von Puzzle ITC initiiert und wird stets weiterentwickelt.

Die Basis für die Software bildet das Webframework Ruby on Rails. Für das User Interface wird neben statischer Technologie wie HTML und CSS auch JavaScript oder Hotwire verwendet. Der komplette Source-Code steht auf Github zur Verfügung: https://github.com/hitobito

\section{Detaillierte Aufgabenstellung}
Mit dieser Probe-IPA soll ein neues Konzept und Datenmodell für die Persistierung von Filter-Parametern erstellt werden (rein Backend). Anschliessend soll dieses Konzept in einem Proof of Concept (PoC) bei einem Teil der Mailinglisten (Abos) umgesetzt werden.

\begin{itemize}
    \item Die Klassen Subscription, RelatedRoleType, PeopleFilter, usw. werden im neuen Konzept komplett ersetzt oder ggf. ergänzt
    \item Eine Möglichkeit ist das PeopleFilter die Basis für das neue Konzept bilden
    \item Es sollen 2-3 Grobkonzepte gegenüber gestellt werden und das ausgewählte Konzept detaillierter ausgearbeitet werden
\end{itemize}

PoC

\begin{itemize}
\item Folgende Komponenten der MailingLists Filter sollen mit dem neuen Konzept im PoC umgesetzt werden:
    \begin{itemize}
        \item Globale Bedingungen > Sprache
        \item Personen
        \item Ausgeschlossene Personen
        \item Optional: Gruppen / Rollen
    \end{itemize}    
\item Persistierte Subscriptions/Filter müssen für den PoC vorerst nicht migriert werden
\item Die nicht erwähnten Komponenten müssen nicht mehr funktionieren
\item Die erwähnten Komponenten (ohne Optionale) funktionieren im UI und haben eine minimale, funktionierende Testabdeckung (happy path)
\end{itemize}

Out of Scope - wird nicht oder erst nach der Probe IPA umgesetzt

\begin{itemize}
    \item Konzept und Anpassungen Frontend/UI
    \item PoC Umbau/Migration People Filter Personenlisten
    \item JSON API Filter (Grafiti)
\end{itemize}

\newpage

\subsection{Mittel und Methoden}

Technologie und Plattform:

\begin{itemize}
    \item Ruby, Ruby on Rails, Active Record
\end{itemize}

Entwicklungsumgebung:

\begin{itemize}
    \item Intellij
    \item Git, Github
    \item Rake
    \item Rubocop
\end{itemize}

Textverarbeitung und Diagramme:

\begin{itemize}
    \item Latex
    \item draw.io
    \item Google Sheets
\end{itemize}

Projektmethode:

\begin{itemize}
    \item Scrum IPA
\end{itemize}

Konventionen:

\begin{itemize}
    \item Es gilt der Ruby Style Guide (https://github.com/rubocop-hq/ruby-style-guide) und der Rails Style Guide (https://github.com/rubocop-hq/rails-style-guide) gemäss Rubocop Konfiguration des Projekts (https://github.com/puzzle/cryptopus/blob/master/.rubocop.yml)
\end{itemize}

\subsection{Vorkenntnisse}
Marc arbeitet bereits seit einigen Monaten an Features von Hitobito. Ausserdem hat er bereits seit dem 2. Lehrjahr Erfahrung auch in anderen Ruby on Rails Projekten gesammelt.

\subsection{Vorarbeiten}
\begin{itemize}
    \item Vorbereitung Dokumentvorlage
    \item Ist-Analyse Personen-Filter Personen-Listen/Abos
    \item Dokumentation in der Developer-Dokumentation der bestehenden Implementation von MailingLists, FilteredList, Personen-Filter
\end{itemize}

\subsection{Neue Lerninhalte}

\begin{itemize}
    \item Eigenständiges Entwerfen der Datenstruktur/Klassen
\end{itemize}

\subsection{Arbeiten in den letzten 6 Monaten}

\begin{itemize}
    \item Umsetzung diverser Features für Hitobito (Ruby on Rails)
    \item Postgresql Migration Hitobito
\end{itemize}

\chapter{Firmenstandards}

\section{Code conventions}
Als Code convention werden die Ruby \href{https://github.com/rubocop/ruby-style-guide}{Style Guides} verwendet. 
Die Überprüfung dieser Style Guidelines wird mit Rubocop (Formatter) sichergestellt. Die Konfiguration
dieses Formatters ist unter \href{https://github.com/hitobito/hitobito/blob/master/.rubocop.yml}{rubocop.yml} ersichtlich.

\subsection{Lizenz}
In jedem File in Hitobito wird das Copyright für den jeweiligen Kunden und die Lizenz dazu
in Kommentarform beschrieben. Diese Lizenz- sowie Kundeninformationen können über folgenden Befehl 
eingefügt werden.

\begin{verbatim}
    rake license:insert
\end{verbatim}
    
Alternativ dazu können diese Informationen mit 

\begin{verbatim}
    rake license:remove 
\end{verbatim}

entfernt oder mit 

\begin{verbatim}
    rake license:update 
\end{verbatim} aktualisiert werden.

\newpage

\section{Git conventions}
Für das cloudbasierte Hosting unseres Git-Repositories wird Github verwendet. 
Die Git Commitnachrichten werden nach den Regeln von Puzzle ITC formuliert. Im Anhang
unter \hyperref[sec:gitconv]{Git Conventions} finden sie eine Kopie unserer Firmenkonventionen

\begin{itemize}
    \item Sprache: Englisch
    \item Kurze und prägnante Message, idealerweise unter 50 Zeichen \href{https://cbea.ms/git-commit/#limit-50}{Details}
    \item Mit Grossbuchstaben beginnen \href{https://cbea.ms/git-commit/#capitalize}{Details}
    \item Kein Punkt am Schluss \href{https://cbea.ms/git-commit/#end}{Details}
    \item Den \textit{imperative mood} (Befehlsform) verwenden, also «Fix bug with X» statt «Fixed bug with X» oder «More fixes for broken stuff» \href{https://cbea.ms/git-commit/#imperative}{Details}
    \item Wenn vorhanden Ticket referenzieren:
    \begin{itemize}
        \item Bei Open Project Work Packages: «Add X, refs \#12345»
        \item Bei Gitlab/Github Issues: «Add X \#12345»
    \end{itemize}
\end{itemize}

\section{Documentation Conventions}
Als Documentation covention wird arc42 verwendet (Siehe \href{https://arc42.org/documentation/}{arc 42 documentation}). 

\chapter{IPA-Schutzbedarfanalyse}

\section{Datensicherheit}
Die notwendigen Daten welche im Rahmen der IPA zu Test- und Vorführungszwecken verwendet werden,
sind werden durch das \href{https://github.com/faker-ruby/faker}{Faker-Gem} generiert und sind somit NICHT 
besonders schützenswert. Dazu gehören unter anderem Adressen, Familiendaten, Finanzdaten.

\section{Applikationssicherheit}

Da keine besonders schützenswerte Daten verwendet werden, werden die Standards von
Puzzle ITC nach Firmen-Sicherheitsbuch verwendet. Sie können dieses unter \hyperref[sec:secconv]{Security Conventions}
einsehen. Diese Security Conventions umfassen:

\begin{itemize}
    \item{Injection / Cross Size Scripting}
    \begin{itemize}
        \item{Input Validierung von allen Inputs serverseitig durchführen}
        \item{Output Encoding auf allen Outputs anwenden}
        \item{Kein inline oder dynamisches SQL, sondern parametrisierte Queries verwenden}
        \item {Datei Uploads überprüfen}
    \end{itemize}
    \item Verbindungs- / Browsersicherheit
    \begin{itemize}
        \item{Nur HTTPS verwenden und korrekt konfigurieren}
        \item{Security Headers setzen}
        \item{Cookie Flags secure, httpOnly und SameSite setzen}
        \item{Kein Caching von sensiblen Informationen}
    \end{itemize}

    \newpage

    \item Authentication / Sessions
    \begin{itemize}
        \item{IAM des Frameworks oder besser Keycloak verwenden}
        \item{Keine sensitiven Infos in URL Parameter}
        \item{Brute Force Schutz}
        \item{ Sessions schützen}
    \end{itemize}
    \item Tools und Betriebsumgebung
    \begin{itemize}
        \item{Errorhandling und Logging}
        \item{Libraries und deren Dependencies auf bekannte Schwachstellen prüfen}
        \item{OS, Webserver, Container aktuell halten und Hardening}
        \item{Keine Produktionsdaten auf Integrationsumgebungen}
    \end{itemize}
    \item Security Testing
    \begin{itemize}
        \item{Es dürfen keine Secrets im Repository abgelegt werden}
        \item{Eingebundene Dependencies dürfen keine MEDIUM und HIGH Schwachstellen aufweisen}
        \item{Eine statische Codeanalyse sollte durchgeführt werden}
        \item{Eine dynamische Codeanalyse sollte durchgeführt werden}
        \item{Alle verwendeten Images sollten auf Schwachstellen gescannt werden}
    \end{itemize}
\end{itemize}

\chapter{Organisation der IPA-Ergebnisse}

\chapter{Projektmethode}

\chapter{Projektaufbauorganisation}

\input{zeitplan.tex}

\chapter{Arbeitsjournale}
\input{journal/tag1.tex}
\input{journal/tag2.tex}
\input{journal/tag3.tex}
\input{journal/tag4.tex}
\input{journal/tag5.tex}
\input{journal/tag6.tex}
\input{journal/tag7.tex}
\input{journal/tag8.tex}
\input{journal/tag9.tex}
\input{journal/tag10.tex}

\chapter{Persönliches Fazit}